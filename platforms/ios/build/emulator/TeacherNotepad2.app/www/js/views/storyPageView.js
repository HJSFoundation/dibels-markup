App.Views.StoryPage=Backbone.View.extend({template:App.templates.storyPage,storyStimulusEl:".js-storyFlip",events:{click:"removeView"},initialize:function(){_.bindAll(this),this.listen()},listen:function(){this.listenTo(App.Dispatcher,"StimulusChangeRequested:"+App.Config.skill.stageStories,this.handleSkillChangeRequest),this.listenTo(App.Dispatcher,"StimulusChangeRequested:"+App.Config.skill.leveledTexts,this.handleSkillChangeRequest),this.listenTo(App.Dispatcher,"flipStoryButtonTapped",this.handleFlipStoryRequest)},render:function(){this.$el.html(this.template()),this.storyImageView=new App.Views.StoryImage({el:".js-storyImage"}),this.storyMenuAssessmentView=new App.Views.MenuAssessment({el:".js-storyMenuAssessment"}),this.storyButtonFlipView=new App.Views.ButtonFlip({el:".js-storyButtonFlip",eventName:"flipStoryButtonTapped"})},removeView:function(){this.$el.empty()},handleSkillChangeRequest:function(e){this.render(e)},handleFlipStoryRequest:function(){var e=$(this.storyStimulusEl);this.flipped?(e.addClass("st-unflipped"),e.removeClass("st-flipped"),$(".js-storyTextTeacher").hide()):(e.addClass("st-flipped"),e.removeClass("st-unflipped"),$(".js-storyTextTeacher").show()),this.flipped=!this.flipped}});