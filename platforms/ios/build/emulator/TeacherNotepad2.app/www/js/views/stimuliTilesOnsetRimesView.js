App.Views.StimuliTilesOnsetRimes=Backbone.View.extend({template:App.templates.stimuliTilesOnsetRimes,gridClassOnset:"js-stimuliTileOnset",gridClassRime:"js-stimuliTileRime",tileClass:"tile grid-cell u-text-center",tiles:[],initialize:function(){_.bindAll(this),this.listen()},listen:function(){this.listenTo(App.Dispatcher,"SkillChangeRequested:OnsetRimes",this.handleSkillChangeRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:CVts",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:LetterNames",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:LetterSounds",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:SightWords",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:Affixes",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:StageStories",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"SkillChangeRequested:LeveledTexts",this.handleSkillReplaceRequest),this.listenTo(App.Dispatcher,"matrixStudentSelectorTabActiveRequest",this.handleStudentChangeRequest)},render:function(){this.$el.html(this.template(this.templateJSON()));var e=this;this.$gridClass=$("."+this.gridClassOnset);var s=App.stimuli.where({studentId:App.selectedStudent.get("id"),skill:App.Config.skill.onsetRimes,subSkill:App.Config.skill.onsets});_.each(s,function(s){var i=new App.Views.Tile({className:e.tileClass,model:s});e.tiles.push(i),e.$gridClass.append(i.render().el)});var i=App.stimuli.where({studentId:App.selectedStudent.get("id"),skill:App.Config.skill.onsetRimes,subSkill:App.Config.skill.rimes});this.$gridClass=$("."+this.gridClassRime),_.each(i,function(s){var i=new App.Views.Tile({className:e.tileClass,model:s});e.tiles.push(i),e.$gridClass.append(i.render().el)})},templateJSON:function(){return{jsClassOnset:this.gridClassOnset,jsClassRime:this.gridClassRime}},handleSkillChangeRequest:function(){this.render()},handleSkillReplaceRequest:function(){_.each(this.tiles,function(e){e.remove()}),this.tiles=[]},handleStudentChangeRequest:function(){App.selectedSkill===App.Config.skill.onsetRimes&&(this.handleSkillReplaceRequest(),this.render())}});